<?xml version="1.0" encoding="UTF-8" ?>    
<!DOCTYPE mapper    
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"    
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace = "Questionaries">
	<select id="getQuestionInfo" parameterType="Question" resultMap="Questionaries-ResultMappings.ResultForGetQuestion">
		SELECT 
		<include refid="Questionaries-SqlQueries.SelectForGetQuestion" />
		FROM QUESTIONS
		WHERE 
		QUESTION_ID = #{questionId}
	</select>
	
	<select id="getSurveyInfo" parameterType="Survey" resultMap="Questionaries-ResultMappings.ResultForGetSurvey">
		SELECT 
		<include refid="Questionaries-SqlQueries.SelectForGetQuestionSurvey" />
		FROM SURVEY
		WHERE 
		SET_ID = #{surveyId}
	</select>
	
	<insert id="submitSurvey" parameterType="Survey">
		INSERT INTO SURVEY (CREATED, DESCRIPTION, IS_ACTIVE)
		VALUES(CURRENT_TIMESTAMP, #{description}, 0)
	</insert>
	
	<insert id="updateSurvey" parameterType="Survey">
		UPDATE SURVEY
		SET 
		DESCRIPTION = #{description}, 
		IS_ACTIVE = #{isActive}
		WHERE 
		SURVEY_ID = #{surveyId}
	</insert>
</mapper>